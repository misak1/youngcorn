{% extends "../common/templates/default.html.twig" %}

{% block title %}Project HOME{% endblock title %}

{% block head %}
	<!-- local -->
	<link rel="stylesheet" href="./index_files/cont.css" />
{% endblock head %}

{% block main %}
	<p>プロジェクトを<a href="/">再選択</a>へ。</p>
	<p><button class="btn btn-default" onclick="main.socketTest();return false;">疎通テスト</button></p>

{% endblock main %}


{% block foot %}
	<!-- local -->
	<script src="./index_files/cont.js"></script>
	<script>
		$(main.init(function(){
			main.it79.fnc({}, [
				function(it1, data){
					console.log('setup env...');
					setTimeout(function(){
						it1.next(data);
					}, 10);
				},
				function(it1, data){
					// timer
					setTimeout(function(){
						it1.next(data);
					}, 1000);
				} ,
				function(it1, data){
					// Parse Query string parameters
					data.projectId = main.php.intval($.url(window.location.href).param('id'));
					// console.log( data );
					it1.next(data);
				} ,
				function(it1, data){
					// プロジェクト情報を取得
					main.socket.send('getProject', {'projectId': data.projectId}, function(projectInfo){
						data.projectInfo = projectInfo;
						console.log( data );
						it1.next(data);
					});
				} ,
				function(it1, data){
					console.log('Started!');
					console.log(data);
					it1.next(data);
				}
			]);
		}));
	</script>
{% endblock foot %}
